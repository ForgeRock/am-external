{
  "$id": "https://www.forgerock.com/remoteIdentityProvider.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "identityProvider": {
    "title": "Remote Identity Provider",
    "description": "This schema describes a SAML2 remote identity provider.",
    "type": "object",
    "traverseObject": true,
    "javaType": "org.forgerock.openam.federation.rest.schema.remote.identity.IdentityProvider",
    "properties": {
      "assertionContent": {
        "propertyOrder": 0,
        "traverseObject": true,
        "title": "Assertion Content",
        "type": "object",
        "properties": {
          "signingAndEncryption": {
            "traverseObject": true,
            "title": "Signing And Encryption",
            "type": "object",
            "properties": {
              "requestResponseSigning": {
                "traverseObject": true,
                "title": "Request/Response Signing",
                "description": "Select the checkbox for each request/response that should be signed",
                "type": "object",
                "properties": {
                  "authenticationRequest": {
                    "attributePath": {
                      "value": "/wantAuthnRequestsSigned"
                    },
                    "title": "Authentication Request",
                    "type": "boolean",
                    "default": false
                  },
                  "artifactResolve": {
                    "attributeKey": "wantArtifactResolveSigned",
                    "title": "Artifact Resolve",
                    "type": "boolean",
                    "default": false
                  },
                  "logoutRequest": {
                    "attributeKey": "wantLogoutRequestSigned",
                    "title": "Logout Request",
                    "type": "boolean",
                    "default": false
                  },
                  "logoutResponse": {
                    "attributeKey": "wantLogoutResponseSigned",
                    "title": "Logout Response",
                    "type": "boolean",
                    "default": false
                  },
                  "manageNameIdRequest": {
                    "attributeKey": "wantMNIRequestSigned",
                    "title": "Manage NameID Request",
                    "type": "boolean",
                    "default": false
                  },
                  "manageNameIdResponse": {
                    "attributeKey": "wantMNIResponseSigned",
                    "title": "Manage NameID Response",
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "authenticationRequest",
                  "artifactResolve",
                  "logoutRequest",
                  "logoutResponse",
                  "manageNameIdRequest",
                  "manageNameIdResponse"
                ]
              },
              "encryption": {
                "traverseObject": true,
                "title": "Encryption",
                "type": "object",
                "properties": {
                  "nameIdEncryption": {
                    "attributeKey": "wantNameIDEncrypted",
                    "title": "NameID Encryption",
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": ["nameIdEncryption"]
              },
              "secretIdAndAlgorithms": {
                "traverseObject": true,
                "title": "Algorithms",
                "type": "object",
                "properties": {
                  "signingAlgorithm": {
                    "$ref": "definitions.json#/secretIdAndAlgorithms/properties/signingAlgorithm"
                  },
                  "digestAlgorithm": {
                    "$ref": "definitions.json#/secretIdAndAlgorithms/properties/digestAlgorithm"
                  },
                  "encryptionAlgorithm": {
                    "$ref": "definitions.json#/secretIdAndAlgorithms/properties/encryptionAlgorithm"
                  }
                }
              }
            }
          },
          "nameIdFormat": {
            "traverseObject": true,
            "title": "NameID Format",
            "type": "object",
            "properties": {
              "nameIdFormatList": {
                "$ref": "definitions.json#/nameIdFormatList"
              }
            }
          },
          "secrets": {
            "$ref": "definitions.json#/secrets"
          },
          "basicAuthentication": {
            "traverseObject": true,
            "description": "Configure basic authentication setting for Soap based binding",
            "title": "Basic Authentication",
            "type": "object",
            "properties": {
              "enabled": {
                "$ref": "definitions.json#/basicAuthentication/properties/enabled"
              },
              "userName": {
                "$ref": "definitions.json#/basicAuthentication/properties/userName"
              },
              "password": {
                "title": "Password",
                "attributeKey": {
                  "value": "basicAuthPassword",
                  "mapper": "org.forgerock.openam.federation.rest.schema.mappers.PasswordMapper"
                },
                "type": "string",
                "format": "password",
                "description": "<strong>Note:</strong> This value is ignored if the value of the Secret Label Identifier is provided and a mapping exists for the secret label \n<code>am.applications.federation.entity.providers.saml2.demo.basicauth</code> to a secret in a secret store where \"demo\" is the value of the Secret Label Identifier in this example."
              }
            }
          },
          "clientAuthentication":{
            "traverseObject": true,
            "title": "Client Authentication",
            "description": "Select the checkbox for each request that should send a client certificate",
            "type": "object",
            "properties": {
              "artifactResolveMTLS": {
                "attributeKey": "wantArtifactResolveMTLS",
                "title": "Artifact Resolve",
                "description": "Instructs the SP to send a client certificate along with the Artifact Resolve request.",
                "type": "boolean",
                "default": false
              }
            }
          }
        }
      },
      "services": {
        "propertyOrder": 1,
        "traverseObject": true,
        "title": "Services",
        "type": "object",
        "properties": {
          "serviceAttributes": {
            "type": "object",
            "title": "IDP Service Attributes",
            "traverseObject": true,
            "properties": {
              "artifactResolutionService": {
                "title": "Artifact Resolution Service",
                "type": "array",
                "attributePath": {
                  "value": "artifactResolutionService",
                  "mapper": "org.forgerock.openam.federation.rest.schema.mappers.IndexedEndpointMapper"
                },
                "items": {
                  "$ref": "definitions.json#/endpoint"
                }
              },
              "singleLogoutService": {
                "title": "Single Logout Service",
                "type": "array",
                "attributePath": {
                  "value": "singleLogoutService",
                  "mapper": "org.forgerock.openam.federation.rest.schema.mappers.EndpointMapper"
                },
                "items": {
                  "$ref": "definitions.json#/endpoint"
                }
              },
              "nameIdService": {
                "title": "Manage NameID Service",
                "type": "array",
                "attributePath": {
                  "value": "manageNameIDService",
                  "mapper": "org.forgerock.openam.federation.rest.schema.mappers.EndpointMapper"
                },
                "items": {
                  "$ref": "definitions.json#/endpoint"
                }
              },
              "singleSignOnService": {
                "title": "Single SignOn Service",
                "type": "array",
                "attributePath": {
                  "value": "singleSignOnService",
                  "mapper": "org.forgerock.openam.federation.rest.schema.mappers.EndpointMapper"
                },
                "items": {
                  "$ref": "definitions.json#/endpoint"
                }
              }
            }
          },
          "nameIdMapping": {
            "title": "NameID Mapping",
            "type": "array",
            "attributePath": {
              "value": "nameIDMappingService",
              "mapper": "org.forgerock.openam.federation.rest.schema.mappers.EndpointMapper"
            },
            "items": {
              "$ref": "definitions.json#/endpoint"
            }
          }
        }
      }
    }
  }
}
